<%= content_for :styles do %>
<%# TODO Use some kind of body class rather than this. %>
<style>body { padding-top: 58px; }</style>
<% end %>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <%= link_to "", root_path, class: "navbar-brand icon icon-pelp-logo" %>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">
            <ul class="nav navbar-nav navbar-left">
                <%= active_link_to "Strona główna", root_path, wrap_tag: :li %>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Kursy <span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-colors" role="menu">
                        <li class="dropdown-header">Ostatnie</li>
                        <% current_user.last_visited_courses(5).each do |c| %>
                        <li class="colored" style="border-color: <%= string_to_pastel("#{c.name}#{c.id}") %>">
                            <%= link_to "#{c.name}", course_path(c), data: { 'no-turbolink' => 'no-turbolink' } %>
                        </li>
                        <% end %>
                        <li class="divider"></li>
                        <%= active_link_to "Wszystkie", courses_path, wrap_tag: :li, data: { 'no-turbolink' => 'no-turbolink' } %>
                    </ul>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#">
                        <i class="glyphicon glyphicon-inbox hidden-xs"></i>
                        <span class="visible-xs">Wiadomości</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="glyphicon glyphicon-th-list hidden-xs"></i>
                        <span class="visible-xs">Aktywność</span>
                    </a>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <%= current_user.name %> <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu" role="menu">
                        <li class="text-center"><img src="/assets/noavatar.svg" class="img-circle navbar-avatar" style="background-color: <%= string_to_pastel current_user.name, :darker %>"/></li>
                        <%= active_link_to "Mój profil", user_path(current_user), wrap_tag: :li, data: { 'no-turbolink' => 'no-turbolink' } %>
                        <li><a href="#">Ustawienia</a></li>
                        <li class="divider"></li>
                        <li><%= link_to "Wyloguj się", destroy_user_session_path, data: { 'no-turbolink' => 'no-turbolink' } %></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
